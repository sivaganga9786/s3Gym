<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Register Client</title>
  <style>
    .input-group { margin: 10px 0; }
    .tab {
      display: inline-block;
      padding: 5px 10px;
      margin: 0 5px;
      border: 1px solid #aaa;
      cursor: pointer;
    }
    .tab.active {
      background-color: #28a745;
      color: white;
    }
  </style>
</head>
<body>

  <h2>Register Client</h2>

  <form id="clientForm">
    <div class="input-group">
      <label>Client Name:</label>
      <input type="text" id="clientName" required>
    </div>

    <div class="input-group">
      <label>Phone Number:</label>
      <input type="text" id="phone" required>
    </div>

    <div class="input-group">
      <label>Member Type:</label>
      <select id="memberType">
        <option value="student">Student</option>
        <option value="general">General</option>
      </select>
    </div>

    <div class="input-group">
      <label>Goal:</label>
      <select id="goal">
        <option value="strength">Only Strength</option>
        <option value="strength_cardio">Strength + Cardio</option>
      </select>
    </div>

    <div class="input-group">
      <label>PT Offer:</label>
      <select id="ptOffer">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>
    </div>

    <div class="input-group" id="ptFeeGroup" style="display: none;">
      <label>PT Fee (Manual Entry):</label>
      <input type="number" id="ptFee" placeholder="Enter PT fee">
    </div>

    <div class="input-group">
      <label>Choose Duration:</label>
      <div id="durationTabs">
        <span class="tab" data-months="1">1 Month</span>
        <span class="tab" data-months="3">3 Months</span>
        <span class="tab" data-months="6">6 Months</span>
        <span class="tab" data-months="12">1 Year</span>
      </div>
    </div>

    <div class="input-group">
      <label>Total Fee:</label>
      <input type="text" id="totalFee" readonly>
    </div>

    <button type="submit">Submit</button>
  </form>

  <script>
    const feeTableStrengthOnly = {
      student: { 1: 800, 3: 2300, 6: 4200, 12: 7800 },
      general: { 1: 1000, 3: 2700, 6: 5100, 12: 9500 }
    };

    const feeTableStrengthCardio = {
      student: { 1: 1100, 3: 3000, 6: 5800, 12: 9000 },
      general: { 1: 1300, 3: 3600, 6: 6900, 12: 13000 }
    };

    let selectedMonths = 1;

    const durationTabs = document.querySelectorAll('.tab');
    const totalFeeInput = document.getElementById('totalFee');
    const ptOffer = document.getElementById('ptOffer');
    const ptFeeGroup = document.getElementById('ptFeeGroup');
    const ptFeeInput = document.getElementById('ptFee');

    durationTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        durationTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        selectedMonths = parseInt(tab.dataset.months);
        calculateFee();
      });
    });

    ptOffer.addEventListener('change', () => {
      ptFeeGroup.style.display = ptOffer.value === 'yes' ? 'block' : 'none';
      calculateFee();
    });

    document.getElementById('goal').addEventListener('change', calculateFee);
    document.getElementById('memberType').addEventListener('change', calculateFee);
    ptFeeInput.addEventListener('input', calculateFee);

    function calculateFee() {
      const memberType = document.getElementById('memberType').value;
      const goal = document.getElementById('goal').value;
      let baseFee = 0;

      if (goal === 'strength_cardio') {
        baseFee = feeTableStrengthCardio[memberType][selectedMonths];
      } else {
        baseFee = feeTableStrengthOnly[memberType][selectedMonths];
      }

      let ptFee = 0;
      if (ptOffer.value === 'yes' && ptFeeInput.value) {
        ptFee = parseInt(ptFeeInput.value);
      }

      totalFeeInput.value = baseFee + ptFee;
    }

    // Default tab selection
    durationTabs[0].click();

    // Prevent duplicate phone numbers (for demo use only)
    const existingPhones = ["9876543210", "1234567890"]; // Simulate existing numbers

    document.getElementById('clientForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const phone = document.getElementById('phone').value.trim();

      if (existingPhones.includes(phone)) {
        alert("Phone number already exists. No data updated.");
        return;
      }

      // Add form submission logic here
      alert("Form submitted successfully!");
    });
  </script>
</body>
</html>

